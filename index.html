<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>CatMind AI 5.0</title>

<style>
:root{
 --accent:#20e3b2;
 --glass:rgba(15,20,25,0.65);
 --muted:rgba(255,255,255,.7);
}

*{box-sizing:border-box}
html,body{
 margin:0;
 height:100%;
 font-family:system-ui,-apple-system,sans-serif;
 background:black;
 color:white;
 overflow-x:hidden;
}

/* BACKGROUND */
#bg{
 position:fixed; inset:0;
 background-size:cover;
 background-position:center;
 transition:opacity 1.2s ease;
 z-index:-3;
}
.overlay{
 position:fixed; inset:0;
 background:linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.85));
 z-index:-2;
}

/* LAYOUT */
.wrap{
 position:relative;
 z-index:5;
 max-width:1200px;
 margin:70px auto;
 padding:20px;
}

.topbar{
 display:flex;
 justify-content:space-between;
 align-items:center;
 background:var(--glass);
 backdrop-filter:blur(15px);
 padding:12px 25px;
 border-radius:100px;
}

h1{margin:0;font-size:20px;color:var(--accent)}

main{
 margin-top:40px;
 display:grid;
 grid-template-columns:1.2fr .8fr;
 gap:25px;
}
@media(max-width:900px){
 main{grid-template-columns:1fr}
}

.card{
 background:var(--glass);
 backdrop-filter:blur(20px);
 border-radius:20px;
 padding:22px;
}

select,textarea{
 width:100%;
 padding:10px;
 border-radius:12px;
 border:none;
 background:rgba(255,255,255,.08);
 color:white;
 margin-bottom:12px;
}

button{
 background:var(--accent);
 border:none;
 padding:12px;
 border-radius:40px;
 font-weight:bold;
 cursor:pointer;
 width:100%;
 transition:.3s;
}
button:hover{opacity:.85}

.result{
 margin-top:20px;
 opacity:0;
 transform:translateY(10px);
 transition:.4s;
}
.result.show{
 opacity:1;
 transform:translateY(0);
}

.history-item{
 background:rgba(255,255,255,.05);
 padding:12px;
 border-radius:12px;
 margin-bottom:10px;
 font-size:14px;
}

.small-btn{
 margin-top:6px;
 font-size:12px;
 padding:6px;
}

.musicBtn{
 position:fixed;
 bottom:25px;left:25px;
 background:var(--accent);
 border:none;
 padding:12px 18px;
 border-radius:40px;
 cursor:pointer;
}
</style>
</head>

<body>

<div id="bg"></div>
<div class="overlay"></div>

<div class="wrap">
 <div class="topbar">
   <h1>CatMind AI</h1>
   <div>×’×¨×¡×” 5.0</div>
 </div>

 <main>

   <section class="card">
     <h2>××‘×—×•×Ÿ ×”×ª× ×”×’×•×ª</h2>

     <select id="issue">
       <option value="bite">× ×©×™×›×•×ª ×‘×œ×™×˜×•×£</option>
       <option value="night">×™×œ×œ×•×ª ×‘×œ×™×œ×”</option>
       <option value="litter">×¦×¨×›×™× ××—×•×¥ ×œ××¨×’×–</option>
     </select>

     <textarea id="details" placeholder="×ª××¨ ××ª ×”××§×¨×” ×›××Ÿ..."></textarea>

     <button id="analyze">× ×ª×— ×¢×›×©×™×•</button>

     <div id="result" class="result">
       <h3 id="diag"></h3>
       <p id="meaning"></p>
     </div>
   </section>

   <aside class="card">
     <h3>×”×™×¡×˜×•×¨×™×™×ª ××‘×—×•× ×™×</h3>
     <div id="history"></div>
     <button class="small-btn" onclick="clearHistory()">ğŸ—‘ ××—×§ ×”×›×œ</button>
   </aside>

 </main>
</div>

<button class="musicBtn" id="toggleSound">ğŸ¾ ×”×¤×¢×œ ×’×¨×’×•×¨</button>

<script>

/* BACKGROUND */
const images=['bg.png','bg2.png','bg3.png'];
let i=0;
const bg=document.getElementById('bg');
function changeBg(){
 bg.style.opacity=0;
 setTimeout(()=>{
  bg.style.backgroundImage=`url('${images[i]}')`;
  bg.style.opacity=1;
  i=(i+1)%images.length;
 },700);
}
setInterval(changeBg,6000);
changeBg();

/* DIAGNOSTICS */
document.getElementById("analyze").onclick=()=>{
 const issue=document.getElementById("issue").value;
 const details=document.getElementById("details").value;
 const diag=document.getElementById("diag");
 const meaning=document.getElementById("meaning");
 const result=document.getElementById("result");

 let text="";
 let color="#20e3b2";

 if(issue==="bite"){
  text="×’×™×¨×•×™ ×™×ª×¨ â€” ×”×¤×¡×§ ×œ×™×˜×•×£ ××•×§×“× ×™×•×ª×¨.";
  color="#ffb86b";
 }
 if(issue==="night"){
  text="×¢×•×“×£ ×× ×¨×’×™×” â€” ××©×—×§ ×œ×¤× ×™ ×”×©×™× ×”.";
  color="#7CFF7A";
 }
 if(issue==="litter"){
  text="×¡×˜×¨×¡ ×¡×‘×™×‘×ª×™ â€” ×‘×“×•×§ × ×™×§×™×•×Ÿ ×•××™×§×•×.";
  color="#ff5c7a";
 }

 document.documentElement.style.setProperty('--accent',color);
 diag.innerText="××‘×—× ×”:";
 meaning.innerText=text;
 result.classList.add("show");

 saveHistory(issue,text,details);
};

/* HISTORY */
function saveHistory(issue,text,details){
 const history=JSON.parse(localStorage.getItem("catHistory"))||[];
 const entry={
  date:new Date().toLocaleString(),
  issue,
  text,
  details
 };
 history.unshift(entry);
 localStorage.setItem("catHistory",JSON.stringify(history));
 renderHistory();
}

function renderHistory(){
 const container=document.getElementById("history");
 const history=JSON.parse(localStorage.getItem("catHistory"))||[];
 container.innerHTML="";
 history.forEach((item,index)=>{
  const div=document.createElement("div");
  div.className="history-item";
  div.innerHTML=`
   <strong>${item.date}</strong><br>
   ${item.text}<br>
   <small>${item.details||""}</small>
   <button class="small-btn" onclick="deleteEntry(${index})">××—×§</button>
  `;
  container.appendChild(div);
 });
}

function deleteEntry(index){
 const history=JSON.parse(localStorage.getItem("catHistory"))||[];
 history.splice(index,1);
 localStorage.setItem("catHistory",JSON.stringify(history));
 renderHistory();
}

function clearHistory(){
 localStorage.removeItem("catHistory");
 renderHistory();
}

renderHistory();

/* PURR SOUND */
let audioCtx,masterGain,isPlaying=false;
function createPurr(){
 audioCtx=new (window.AudioContext||window.webkitAudioContext)();
 masterGain=audioCtx.createGain();
 masterGain.gain.value=0.3;
 masterGain.connect(audioCtx.destination);

 const osc1=audioCtx.createOscillator();
 osc1.type="sine";
 osc1.frequency.value=25;

 const osc2=audioCtx.createOscillator();
 osc2.type="sine";
 osc2.frequency.value=50;

 const gain=audioCtx.createGain();
 gain.gain.value=0.5;

 osc1.connect(gain);
 osc2.connect(gain);
 gain.connect(masterGain);

 osc1.start();
 osc2.start();
}
document.getElementById("toggleSound").onclick=async function(){
 if(!isPlaying){
  if(!audioCtx)createPurr();
  if(audioCtx.state==="suspended")await audioCtx.resume();
  this.innerText="ğŸ”‡ ×”×©×ª×§";
  isPlaying=true;
 }else{
  masterGain.gain.value=0;
  this.innerText="ğŸ¾ ×”×¤×¢×œ ×’×¨×’×•×¨";
  isPlaying=false;
 }
};

</script>

</body>
</html>
