<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CatMind â€“ ××‘×—×•×Ÿ ×—×›× ğŸ±</title>

<style>
:root{
  --panel: rgba(8,18,30,0.92);
  --accent: #22d3ee;
}

body{
  margin:0;
  font-family:"Segoe UI",Tahoma,sans-serif;
  background:#000;
  color:#fff;
  overflow-x:hidden;
}

/* ================= BACKGROUND ================= */

#bg{
  position:fixed;
  inset:0;
  z-index:-1;
  background:#000;
  overflow:hidden;
}

.bg-img{
  position:absolute;
  width:100%;
  height:100%;
  object-position:center;
  opacity:0;
  transition:opacity 1.5s ease-in-out;
}

.bg-img.active{
  opacity:1;
}

.overlay{
  position:absolute;
  inset:0;
  background:linear-gradient(to bottom,
      rgba(0,0,0,0.35),
      rgba(0,0,0,0.75)
  );
}

/* ================= PANEL ================= */

.container{
  max-width:720px;
  margin:70px auto;
  padding:30px;
  background:var(--panel);
  border-radius:20px;
  backdrop-filter:blur(10px);
  box-shadow:0 25px 60px rgba(0,0,0,0.6);
}

h1{
  text-align:center;
  margin-top:0;
}

textarea{
  width:100%;
  min-height:100px;
  padding:14px;
  border-radius:12px;
  border:none;
  font-size:16px;
  margin-top:20px;
}

button{
  width:100%;
  padding:15px;
  border-radius:14px;
  border:none;
  margin-top:18px;
  background:var(--accent);
  font-weight:bold;
  font-size:16px;
  cursor:pointer;
  transition:0.3s;
}

button:hover{
  transform:translateY(-2px);
}

.result{
  margin-top:20px;
  padding:20px;
  border-radius:16px;
  background:rgba(0,0,0,0.85);
  white-space:pre-wrap;
  line-height:1.6;
}

/* ===== Mobile ===== */

@media (max-width:768px){
  .container{
    margin:20px;
    padding:20px;
  }
}
</style>
</head>

<body>

<div id="bg">
  <img class="bg-img active">
  <img class="bg-img">
  <div class="overlay"></div>
</div>

<div class="container">
  <h1>ğŸ± ××‘×—×•×Ÿ ×—×›×</h1>

  <textarea id="input" placeholder="×ª××¨ ×¡×™××¤×˜×•××™× ×©×œ ×”×—×ª×•×œ..."></textarea>

  <button onclick="send()">× ×ª×— ××§×¨×”</button>

  <div class="result" id="resultBox"></div>
</div>

<script>
/* ================= BACKGROUND SYSTEM ================= */

const images = [
 "bg.png","bg2.png","bg3.png","bg4.png",
 "bg5.png","bg6.png","bg7.png","bg8.png",
 "bg9.png","bg10.png","bg11.png","bg12.png"
];

const layers = document.querySelectorAll(".bg-img");
let currentLayer = 0;
let imgIndex = 0;

/* preload */
images.forEach(src=>{
  const i = new Image();
  i.src = src;
});

function setFit(img){
  const screenRatio = window.innerWidth / window.innerHeight;

  const temp = new Image();
  temp.src = img.src;
  temp.onload = ()=>{
    const imgRatio = temp.width / temp.height;

    if(Math.abs(screenRatio - imgRatio) < 0.2){
      img.style.objectFit = "cover";
    }else{
      img.style.objectFit = "contain";
    }
  };
}

function changeBg(){
  const next = layers[(currentLayer+1)%2];
  next.src = images[imgIndex];
  setFit(next);

  next.classList.add("active");
  layers[currentLayer].classList.remove("active");

  currentLayer = (currentLayer+1)%2;
  imgIndex = (imgIndex+1)%images.length;
}

changeBg();
setInterval(changeBg,9000);

window.addEventListener("resize",()=>{
  setFit(layers[currentLayer]);
});

/* ================= SERVER CALL ================= */

async function send(){
  const text = document.getElementById("input").value;
  const box = document.getElementById("resultBox");
  box.innerHTML="×˜×•×¢×Ÿ...";

  try{
    const res = await fetch(
      "https://catmind-ai-server.onrender.com/generate",
      {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({text})
      }
    );

    const data = await res.json();
    box.innerHTML = data.result || "×©×’×™××” ×‘× ×™×ª×•×—";
  }catch(e){
    box.innerHTML="×©×’×™××ª ×©×¨×ª";
  }
}
</script>

</body>
</html>
